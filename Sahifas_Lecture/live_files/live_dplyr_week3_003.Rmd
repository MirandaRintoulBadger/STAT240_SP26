---
title: "live_dplyr_week3"
author: "Sahifa"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, error = TRUE)
library(tidyverse)
install.packages("magrittr")
library(magrittr)
```
# Monday

```{r}
# nesting

log(sqrt(3*5^2+4))

(3*5^2+4) %>% sqrt() %>% log()
```

- pipe operator

MAC: cmd+opt+m
windows: ctrl + shift + m

%>%

```{r}
(3*5^2+4)

add(multiply_by(raise_to_power(5, 2), 3), 4)

5 %>% raise_to_power(2) %>% multiply_by(3) %>% add(4)
```

```{r}
grocery_prices = read_csv("../data/grocery-prices.csv")
grocery_list = read_csv("../data/grocery-list.csv")
```
# Wednesday

```{r}
1 %>% add(2)
add(1,2)
add(2,1)
```


# function sthat deal with Columns:

- mutate() : adding columns to your dataset

```{r}
grocery_prices

grocery_prices %>% mutate(price_after_tax = price*0.02, total_cost = price_after_tax+price)
```


- select(): this function will only keep the columns specified in the output


```{r}
grocery_prices %>% mutate(price_after_tax = price*0.02, total_cost = price_after_tax+price) %>% 
  select(item, type, total_cost)


grocery_prices %>% mutate(price_after_tax = price*0.02, total_cost = price_after_tax+price) %>% 
  select(- price, - price_after_tax)

grocery_prices %>% mutate(price_after_tax = price*0.02, total_cost = price_after_tax+price) %>% 
  select(- c(price, price_after_tax))

grocery_prices %>% mutate(price_after_tax = price*0.02, total_cost = price_after_tax+price) %>% 
  select(-c(price:price_after_tax))
```

- relocate(): this function relocates the column specified either to the first position or it'll move it with resoect to other columns

```{r}
grocery_prices %>% 
  mutate(price_after_tax = price*0.02, total_cost = price_after_tax+price) %>% 
  relocate(item, type, total_cost)

grocery_prices %>% 
  mutate(price_after_tax = price*0.02, total_cost = price_after_tax+price) %>% 
  relocate(price, .after = total_cost)


grocery_prices %>% 
  mutate(price_after_tax = price*0.02, total_cost = price_after_tax+price) %>% 
  relocate(price, .before = price_after_tax)

grocery_prices %>% 
  mutate(price_after_tax = price*0.02, total_cost = price_after_tax+price) %>% 
  relocate(c(price_after_tax, total_cost), .after = price)
```

- rename(): this function renames columns, format is similar to mutate, new_col_name = old_col_name

```{r}
grocery_new = grocery_prices %>% 
  mutate(price_after_tax = price*0.02, total_cost = price_after_tax+price) %>% 
  rename(tax = price_after_tax)
```

- Row operations

- arrange(): this function arranges the rows with respect to a column

```{r}
grocery_new %>% arrange(total_cost) # increasing order or ascending

grocery_new %>% arrange(item)

grocery_new %>% arrange(- total_cost) # decreasing or descending order

grocery_new %>% arrange(desc(total_cost)) # decreasing or descending order
```

- filter(): this function filters out or draws rows that satify the condition on a specific column.

```{r}
grocery_new %>% filter(price>= 1) %>% arrange(price)

grocery_new %>% filter(!is.na(price) | !is.na(type))
```

```{r}
starwars %>% filter(!is.na(hair_color) & !is.na(birth_year))
```

- slice_max and slice_min: these functions will filter out the n numbers rows that have max or mino fthe specified col

```{r}
grocery_new %>% slice_max(total_cost, n = 3)
```

# Operations on groups

- summarize(): is for summary tables ()

```{r}
grocery_new %>% summarise(avg_cost = mean(total_cost), sd_cost = sd(total_cost), median_price = median(price), count = n())
```













